{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48187645-2fe8d1ae3615e126e0d343d6c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport function fetchPhotosByQuery(query, currentPage) {\n  const axiosOptions = {\n    params: {\n      key: API_KEY,\n      page: currentPage,\n      per_page: 15,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  };\n\n  return axios.get(`${BASE_URL}`, axiosOptions);\n};\n","export function createGalleryCardTemplate(imgInfo) {\n    return imgInfo\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          return `<li class=\"gallery-item\">\n    <article class=\"card\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\"\n        ><img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\"\n      /></a>\n      <ul class=\"info-list\">\n        <li class=\"info-item\">\n          <h2 class=\"info-subtitle\">Likes:</h2>\n          <p class=\"info-text\">${likes}</p>\n        </li>\n        <li class=\"info-item\">\n          <h2 class=\"info-subtitle\">Views:</h2>\n          <p class=\"info-text\">${views}</p>\n        </li>\n        <li class=\"info-item\">\n          <h2 class=\"info-subtitle\">Comments:</h2>\n          <p class=\"info-text\">${comments}</p>\n        </li>\n        <li class=\"info-item\">\n          <h2 class=\"info-subtitle\">Downloads:</h2>\n          <p class=\"info-text\">${downloads}</p>\n        </li>\n      </ul>\n    </article>\n  </li>`;\n      } \n      )\n      .join('');\n  }\n  ","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nimport { fetchPhotosByQuery } from './js/pixabay-api';\nimport { createGalleryCardTemplate } from './js/render-functions';\n\nconst formSearchCard = document.querySelector('.form-search');\nconst listGalleryCard = document.querySelector('.gallery');\nconst loaderStyle = document.querySelector('.loader');\nconst buttonLoadEl = document.querySelector('.button-load');\n\nlet page = 1;\nlet query = '';\n\nloaderStyle.style.display = 'none';\nbuttonLoadEl.classList.add('is-hidden');\n\nconst lightboxModalWindow = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionsPosition: 'bottom',\n  captionsDelay: 250,\n});\n\nconst searchImg = async event => {\n  try {\n    event.preventDefault();\n\n    query = event.target.query.value.trim();\n\n    listGalleryCard.innerHTML = '';\n\n    if (!query) {\n      iziToast.show({\n        backgroundColor: '#ef4040',\n        message: `Please fill in the field to search for data!`,\n        borderBottom: '2px solid #ffbebe',\n        borderRadius: '4px',\n        padding: '20px',\n        width: '432px',\n        height: '88px',\n        color: '#fafafb',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    loaderStyle.style.display = 'inline-block';\n\n    page = 1;\n\n    buttonLoadEl.classList.add('is-hidden');\n\n    const { data } = await fetchPhotosByQuery(query, page);\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        backgroundColor: '#ef4040',\n        borderBottom: '2px solid #ffbebe',\n        borderRadius: '4px',\n        padding: '20px',\n        width: '432px',\n        height: '88px',\n        color: '#fafafb',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        position: 'topRight',\n      });\n      return;\n    }\n\n    listGalleryCard.insertAdjacentHTML(\n      'beforeend',\n      createGalleryCardTemplate(data.hits)\n    );\n\n    if (data.totalHits > page * 15) {\n      buttonLoadEl.classList.remove('is-hidden');\n    }\n    lightboxModalWindow.refresh();\n    \n  } catch (error) {\n    console.error(error.message);\n  } finally {\n    loaderStyle.style.display = 'none';\n  }\n  event.target.reset();\n};\n\nformSearchCard.addEventListener('submit', searchImg);\n\nconst onButtonLoadClick = async () => {\n  try {\n    page++;\n    const { data } = await fetchPhotosByQuery(query, page);\n    listGalleryCard.insertAdjacentHTML(\n      'beforeend',\n      createGalleryCardTemplate(data.hits)\n    );\n\n    if (page * 15 >= data.totalHits || data.hits.length === 0) {\n      iziToast.info({\n        title: 'Info',\n        position: 'topRight',\n        message: \"There are no more images matching your request.\",\n      });\n      \n      buttonLoadEl.classList.add('is-hidden');\n      return;\n\n    }\n    const smoothScroll = document.querySelector('.gallery-item');\n    if(smoothScroll) {\n     const cardHeight = smoothScroll.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      }); \n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message: 'The image you requested could not be loaded. Please try again later.',\n    });\n  }\n};\n\n      buttonLoadEl.addEventListener('click', onButtonLoadClick);\n"],"names":["API_KEY","BASE_URL","fetchPhotosByQuery","query","currentPage","axiosOptions","axios","createGalleryCardTemplate","imgInfo","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formSearchCard","listGalleryCard","loaderStyle","buttonLoadEl","page","lightboxModalWindow","SimpleLightbox","searchImg","event","iziToast","data","error","onButtonLoadClick","smoothScroll","cardHeight"],"mappings":"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"}